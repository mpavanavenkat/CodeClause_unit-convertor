<!DOCTYPE html>
<html>
<head>
  <title>Unit Converter</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Unit Converter</h1>
    <div class="converter">
      <h2>Length</h2>
      <input type="number" id="lengthInput" placeholder="Enter length">
      <select id="lengthUnit">
        <option value="m">Meter (m)</option>
        <option value="cm">Centimeter (cm)</option>
        <option value="ft">Feet (ft)</option>
        <option value="in">Inch (in)</option>
      </select>
      <button onclick="convertLength()">Convert</button>
      <p id="lengthResult"></p>
    </div>
    <div class="converter">
      <h2>Temperature</h2>
      <input type="number" id="tempInput" placeholder="Enter temperature">
      <select id="tempUnit">
        <option value="c">Celsius (°C)</option>
        <option value="f">Fahrenheit (°F)</option>
        <option value="k">Kelvin (K)</option>
      </select>
      <button onclick="convertTemperature()">Convert</button>
      <p id="tempResult"></p>
    </div>
    <div class="converter">
      <h2>Weight</h2>
      <input type="number" id="weightInput" placeholder="Enter weight">
      <select id="weightUnit">
        <option value="kg">Kilogram (kg)</option>
        <option value="g">Gram (g)</option>
        <option value="lb">Pound (lb)</option>
        <option value="oz">Ounce (oz)</option>
      </select>
      <button onclick="convertWeight()">Convert</button>
      <p id="weightResult"></p>
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>

import React from "react";

const accountDetails = {
  INR: {
    label: "Salary Account",
    bank: "Standard Chartered Bank",
    number: "XXXX-1234-5678",
    desc: "Used for salary payouts and regular payroll batches.",
    availableBalance: "₹6,50,000.00",
    lastUpdated: "14 Oct 2025, 09:30 AM IST",
    recentBatches: [
      { date: "11 Oct 2025", amount: "₹2,75,000.00" },
      { date: "05 Oct 2025", amount: "₹1,50,000.00" },
      { date: "30 Sep 2025", amount: "₹3,20,000.00" }
    ]
  },
  USD: {
    label: "USD Payroll Account",
    bank: "Standard Chartered Bank (NY)",
    number: "XXXX-9999-8888",
    desc: "Used for payroll in US Dollars. SWIFT-enabled.",
    availableBalance: "$10,500.00",
    lastUpdated: "14 Oct 2025, 09:30 AM IST",
    recentBatches: [
      { date: "11 Oct 2025", amount: "$4,000.00" },
      { date: "05 Oct 2025", amount: "$2,000.00" },
      { date: "30 Sep 2025", amount: "$6,000.00" }
    ]
  },
  EUR: {
    label: "Euro Payroll Account",
    bank: "Standard Chartered Bank (Frankfurt)",
    number: "XXXX-5678-4321",
    desc: "For euro-denominated payroll. SEPA supported.",
    availableBalance: "€8,200.00",
    lastUpdated: "14 Oct 2025, 09:30 AM IST",
    recentBatches: [
      { date: "11 Oct 2025", amount: "€3,000.00" },
      { date: "05 Oct 2025", amount: "€2,200.00" },
      { date: "30 Sep 2025", amount: "€3,500.00" }
    ]
  }
};

const BatchAccountInfo = ({ paymentCurrency }) => {
  const details = accountDetails[paymentCurrency];

  return (
    <div className="card shadow-sm border-primary mb-4" style={{ borderRadius: "18px", maxWidth: "430px", margin: "0 auto" }}>
      <div className="card-body d-flex flex-column gap-2">
        <h6 className="fw-bold text-secondary mb-2">
          Batch will debit from:
        </h6>
        <div className="fs-5 text-primary mb-1">
          {details ? details.label : "Not selected"}
        </div>
        {details && (
          <>
            <div className="text-dark mb-1">
              <span className="fw-semibold">Bank:&nbsp;</span>
              {details.bank}
            </div>
            <div className="text-dark mb-1">
              <span className="fw-semibold">Account Number:&nbsp;</span>
              {details.number}
            </div>
          </>
        )}
        <div className="text-muted">
          {details ? details.desc : "Select a payment currency for this payroll batch."}
        </div>
      </div>
    </div>
  );
};

export default BatchAccountInfo;
import React, { useEffect, useState } from "react";

const BatchGrid = () => {
  const [batches, setBatches] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");

  useEffect(() => {
    fetch("http://localhost:8080/api/batch/grid")
      .then((res) => {
        if (!res.ok) throw new Error("Failed to fetch batches");
        return res.json();
      })
      .then((data) => {
        setBatches(data);
        setLoading(false);
      })
      .catch(() => {
        setError("Failed to load batch data from backend.");
        setLoading(false);
      });
  }, []);

  return (
    <div className="card shadow-sm my-4 p-4">
      <h4 className="fw-bold text-primary mb-3">All Payroll Batches</h4>
      {loading && <div>Loading...</div>}
      {error && <div className="alert alert-danger">{error}</div>}
      {!loading && !error && (
        <div className="table-responsive">
          <table className="table table-bordered table-hover align-middle">
            <thead className="table-light">
              <tr>
                <th>Batch Reference</th>
                <th>Created By</th>
                <th>Created At</th>
                <th>No. of Payments</th>
                <th>Max Debit Amount</th>
                <th>Total Debit Amount</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              {batches.length ? (
                batches.map((batch, idx) => (
                  <tr key={idx}>
                    <td>{batch.batchReference}</td>
                    <td>{batch.createdBy}</td>
                    <td>{new Date(batch.createdAt).toLocaleString()}</td>
                    <td>{batch.numberOfPayments}</td>
                    <td>{batch.maxDebitAmount}</td>
                    <td>{batch.totalDebitAmount}</td>
                    <td>{batch.status}</td>
                  </tr>
                ))
              ) : (
                <tr>
                  <td colSpan="7" className="text-center text-muted">
                    No batch data found.
                  </td>
                </tr>
              )}
            </tbody>
          </table>
        </div>
      )}
    </div>
  );
};

export default BatchGrid;
const NavBar = () => {
  return (
    <nav className="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm py-2">
      <div className="container-fluid">
        <a className="navbar-brand fw-bold text-white" href="#">
          Straight2Bank
        </a>
        <button
          className="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span className="navbar-toggler-icon"></span>
        </button>
        <div className="collapse navbar-collapse" id="navbarContent">
          <form className="d-flex mx-auto" style={{ width: "300px" }}>
            <input
              className="form-control me-2"
              type="search"
              placeholder="Search..."
              aria-label="Search"
            />
            <button className="btn btn-light" type="submit">
              <i className="bi bi-search"></i>
            </button>
          </form>
          <div className="d-flex align-items-center gap-3 ms-auto">
          {/* Welcome User with Profile Icon */}
         <div className="d-flex align-items-center gap-2 px-2 bg-white rounded-pill shadow-sm">
         <i className="bi bi-person-circle" style={{ fontSize: "1.4rem", color: "#1976d2" }}></i>
         <span className="fw-semibold text-primary">Welcome, User</span>
         </div>
        {/* Logout Button */}
        <button className="btn btn-outline-light fw-semibold ms-2" type="button">
        Logout
       </button>
      </div>

        </div>
      </div>
    </nav>
  );
};

export default NavBar;
const PayrollActions = ({ filters, employees, onClear, disabled }) => (
  <div className="mt-4 d-flex flex-wrap justify-content-center gap-3 border-top pt-3">
    <button className="btn btn-primary" disabled={disabled} onClick={() => alert('Submitted for Approval')}>Submit for Approval</button>
    <button className="btn btn-outline-secondary" disabled={disabled} onClick={() => alert('Saved as Draft')}>Save Draft</button>
    <button className="btn btn-danger" onClick={onClear}>Clear Form</button>
    <button className="btn btn-secondary" onClick={() => alert('Cancelled')}>Cancel</button>
  </div>
);

export default PayrollActions;
const PayrollFilters = ({ filters, onChange }) => (
  <div className="row g-3 my-3 p-3 border rounded-3 bg-light align-items-end">
    <div className="col-md-3">
      <label className="form-label fw-semibold">Debit Account</label>
      <select
        className="form-select"
        value={filters.debitAccount}
        onChange={e => onChange({ debitAccount: e.target.value })}
      >
        <option value="">Select</option>
        <option value="1">Salary account</option>
        <option value="2">Savings account</option>
      </select>
    </div>
    <div className="col-md-3">
      <label className="form-label fw-semibold">Date</label>
      <input
        className="form-control"
        type="date"
        value={filters.date}
        onChange={e => onChange({ date: e.target.value })}
      />
    </div>
    <div className="col-md-3">
      <label className="form-label fw-semibold">Payroll Type</label>
      <div className="btn-group w-100">
        <button
          className={`btn btn-sm ${filters.payrollType === "Domestic" ? "btn-primary" : "btn-outline-secondary"}`}
          onClick={() => onChange({ payrollType: "Domestic" })}
        >
          Domestic
        </button>
        <button
          className={`btn btn-sm ${filters.payrollType === "Foreign" ? "btn-primary" : "btn-outline-secondary"}`}
          onClick={() => onChange({ payrollType: "Foreign" })}
        >
          Foreign
        </button>
      </div>
    </div>
    <div className="col-md-3">
      <label className="form-label fw-semibold">Payment Currency</label>
      <select
        className="form-select"
        value={filters.paymentCurrency}
        onChange={e => onChange({ paymentCurrency: e.target.value })}
      >
        <option value="">Select</option>
        <option value="INR">INR</option>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
      </select>
    </div>
  </div>
);

export default PayrollFilters;
import React, { useState, useEffect } from "react";
import Navbar from "./Navbar";
import DatePicker from "react-datepicker";
import "react-datepicker/dist/react-datepicker.css";
import BatchAccountInfo from "./BatchAccountInfo";

const CURRENCY_SYMBOLS = { INR: "₹", USD: "$", EUR: "€" };
const INITIAL_BALANCE = { INR: 650000, USD: 10500, EUR: 8200 };

function PayrollManual() {
  const [filters, setFilters] = useState({
    debitAccount: "1",
    date: new Date(),
    payrollType: "Domestic",
    paymentCurrency: "INR",
  });
  const [employees, setEmployees] = useState([]);
  const [newEmployee, setNewEmployee] = useState({
    id: "",
    name: "",
    salary: "",
    currency: "INR",
    accountNumber: "",
  });
  const [error, setError] = useState("");
  const [submitting, setSubmitting] = useState(false);
  const [batchGrid, setBatchGrid] = useState([]);

  useEffect(() => {
    fetchBatchGrid();
  }, []);

  const fetchBatchGrid = () => {
    fetch("http://localhost:8080/api/batch/grid")
      .then((res) => res.json())
      .then((data) => setBatchGrid(data));
  };

  const handleFiltersChange = (updated) =>
    setFilters((prev) => ({ ...prev, ...updated }));

  // For manual entry, enforce correct currency for current filters
  const handleAddEmployee = (e) => {
    e.preventDefault();
    const { payrollType, paymentCurrency } = filters;
    // Validation for manual entry
    if (!newEmployee.id || !newEmployee.name || !newEmployee.salary || !newEmployee.accountNumber) {
      setError("All fields are required.");
      return;
    }
    if (employees.some((emp) => emp.id === newEmployee.id)) {
      setError("An employee with this ID already exists.");
      return;
    }
    if (payrollType === "Domestic" && newEmployee.currency !== "INR") {
      setError("For Domestic payroll, employee currency must be INR.");
      return;
    }
    if (payrollType === "Foreign" && newEmployee.currency !== paymentCurrency) {
      setError(`For Foreign payroll and currency ${paymentCurrency}, employee currency must be ${paymentCurrency}.`);
      return;
    }
    setEmployees([...employees, newEmployee]);
    setNewEmployee({
      id: "",
      name: "",
      salary: "",
      currency: payrollType === "Domestic" ? "INR" : paymentCurrency,
      accountNumber: "",
    });
    setError("");
  };

  // Prevent changing currency unless it matches current allowed, for better UX
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    if (["id", "salary", "accountNumber"].includes(name)) {
      if (/^\d*$/.test(value)) setNewEmployee((prev) => ({ ...prev, [name]: value }));
    } else if (name === "name") {
      if (/^[a-zA-Z\s]*$/.test(value)) setNewEmployee((prev) => ({ ...prev, [name]: value }));
    } else if (name === "currency") {
      // Prevent changing to a currency that doesn't match filters
      if (filters.payrollType === "Domestic" && value !== "INR") return;
      if (filters.payrollType === "Foreign" && value !== filters.paymentCurrency) return;
      setNewEmployee((prev) => ({ ...prev, [name]: value }));
    } else {
      setNewEmployee((prev) => ({ ...prev, [name]: value }));
    }
  };

  const handleRemoveEmployee = (idx) => setEmployees(employees.filter((_, i) => i !== idx));

  const totalAmount = employees.reduce((acc, emp) => acc + Number(emp.salary || 0), 0);

  let approverCount = 1;
  if (totalAmount > 1000000 && totalAmount <= 5000000) approverCount = 2;
  else if (totalAmount > 5000000) approverCount = 3;

  const selectedCurrency = filters.paymentCurrency || "INR";
  const currencySymbol = CURRENCY_SYMBOLS[selectedCurrency];
  const initialBalance = INITIAL_BALANCE[selectedCurrency];
  const filteredBatches = batchGrid
    .filter((b) => b.currency === selectedCurrency)
    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
  const totalDebited = filteredBatches.reduce((acc, batch) => acc + (batch.totalDebitAmount || 0), 0);
  const availableBalance = (initialBalance - totalDebited).toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  const recentBatches = filteredBatches.slice(0, 3);

  const handleSubmitForApproval = () => {
    setSubmitting(true);
    const batchData = {
      batchReference: "BATCH" + Date.now(),
      createdBy: "admin",
      createdAt: new Date().toISOString(),
      debitAccount: filters.debitAccount,
      maxDebitAmount: 100000,
      totalDebitAmount: totalAmount,
      status: "PENDING",
      payments: employees.map((emp) => ({
        employeeId: emp.id,
        employeeName: emp.name,
        salaryAmount: Number(emp.salary),
        currency: emp.currency,
        employeeAccountNo: emp.accountNumber,
        status: "PENDING",
      })),
      currency: selectedCurrency,
    };

    fetch("http://localhost:8080/api/batch", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(batchData),
    })
      .then((res) => {
        if (!res.ok) throw new Error("Failed to save batch!");
        return res.json();
      })
      .then(() => {
        alert("Batch submitted and saved to backend!");
        setEmployees([]);
        fetchBatchGrid();
      })
      .catch(() => {
        alert("Error saving batch to backend! Please try again.");
      })
      .finally(() => setSubmitting(false));
  };

  return (
    <>
      <Navbar />
      <div className="container my-4">
        <div className="p-4 bg-white shadow-sm rounded-3">
          <header className="pb-3 mb-4 border-bottom">
            <h2 className="text-primary fw-bold">Payroll Initiation</h2>
            <p className="text-muted">Create payment batches by entering employee details manually.</p>
          </header>

          {/* Dashboard Top Row */}
          <div className="row mb-3" style={{ minHeight: 285 }}>
            <div className="col-md-5 col-lg-4 d-flex align-items-stretch" style={{ paddingLeft: 0 }}>
              <BatchAccountInfo paymentCurrency={filters.paymentCurrency} />
            </div>
            <div className="col-md-7 col-lg-8 d-flex flex-column gap-3">
              <div className="w-100 ms-md-3">
                <div className="card bg-light mb-3 border border-primary shadow-sm" style={{ borderRadius: "18px" }}>
                  <div className="card-body py-3">
                    <div className="fw-bold text-secondary mb-1">Available Balance</div>
                    <div className="fs-4 text-success">{currencySymbol}{availableBalance}</div>
                    <div className="text-muted">{recentBatches.length ? new Date(recentBatches[0].createdAt).toLocaleString() : "N/A"}</div>
                  </div>
                </div>
                <div className="card bg-white border border-primary shadow-sm" style={{ borderRadius: "18px" }}>
                  <div className="card-body py-3">
                    <div className="fw-bold text-secondary mb-2">Recent Batches</div>
                    <ul className="list-unstyled mb-0">
                      {recentBatches.length === 0 ? (
                        <li>No history.</li>
                      ) : (
                        recentBatches.map((item, idx) => (
                          <li key={idx}>
                            <span className="fw-semibold">{new Date(item.createdAt).toLocaleDateString()}:</span> {currencySymbol}{Number(item.totalDebitAmount).toLocaleString()} debited ({item.numberOfPayments} payments)
                          </li>
                        ))
                      )}
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* Filters row */}
          <div className="row g-3 my-2 p-3 border rounded-3 bg-light align-items-end">
            <div className="col-md-6 col-lg-3">
              <label className="form-label fw-semibold">Debit Account</label>
              <select
                className="form-select"
                value={filters.debitAccount}
                onChange={(e) => handleFiltersChange({ debitAccount: e.target.value })}
              >
                <option value="">Select Account</option>
                <option value="1">Account 1 - Savings</option>
                <option value="2">Account 2 - Corporate</option>
              </select>
            </div>
            <div className="col-md-6 col-lg-3">
              <label className="form-label fw-semibold">Date</label>
              <DatePicker
                selected={filters.date}
                onChange={(date) => handleFiltersChange({ date })}
                className="form-control"
                dateFormat="yyyy-MM-dd"
              />
            </div>
            <div className="col-md-6 col-lg-3">
              <label className="form-label fw-semibold">Payroll Type</label>
              <div className="btn-group w-100">
                <button
                  className={`btn ${filters.payrollType === "Domestic" ? "btn-primary" : "btn-outline-secondary"}`}
                  onClick={() => handleFiltersChange({ payrollType: "Domestic" })}
                >
                  Domestic
                </button>
                <button
                  className={`btn ${filters.payrollType === "Foreign" ? "btn-primary" : "btn-outline-secondary"}`}
                  onClick={() => handleFiltersChange({ payrollType: "Foreign" })}
                >
                  Foreign
                </button>
              </div>
            </div>
            <div className="col-md-6 col-lg-3">
              <label className="form-label fw-semibold">Payment Currency</label>
              <select
                className="form-select"
                value={filters.paymentCurrency}
                onChange={(e) => handleFiltersChange({ paymentCurrency: e.target.value })}
              >
                <option value="">Select Currency</option>
                <option value="INR">INR</option>
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
              </select>
            </div>
          </div>

          {/* Input Form */}
          <div className="my-4 p-4 border rounded-3 bg-light shadow-sm">
            <h5 className="mb-3 fw-semibold">Add Employee Manually</h5>
            {error && <div className="alert alert-danger p-2">{error}</div>}
            <form onSubmit={handleAddEmployee} className="row g-3 align-items-end">
              <div className="col-sm-6 col-md-2">
                <label className="form-label fw-semibold">Employee ID</label>
                <input
                  type="text"
                  name="id"
                  value={newEmployee.id}
                  onChange={handleInputChange}
                  className="form-control"
                />
              </div>
              <div className="col-sm-6 col-md-3">
                <label className="form-label fw-semibold">Employee Name</label>
                <input
                  type="text"
                  name="name"
                  value={newEmployee.name}
                  onChange={handleInputChange}
                  className="form-control"
                />
              </div>
              <div className="col-sm-6 col-md-2">
                <label className="form-label fw-semibold">Salary</label>
                <input
                  type="text"
                  name="salary"
                  value={newEmployee.salary}
                  onChange={handleInputChange}
                  className="form-control"
                />
              </div>
              <div className="col-sm-6 col-md-2">
                <label className="form-label fw-semibold">Currency</label>
                <select
                  name="currency"
                  value={newEmployee.currency}
                  onChange={handleInputChange}
                  className="form-select"
                  disabled={filters.payrollType === "Domestic" || filters.payrollType === "Foreign"}
                >
                  {filters.payrollType === "Domestic" && <option>INR</option>}
                  {filters.payrollType === "Foreign" && filters.paymentCurrency !== "" && (
                    <option>{filters.paymentCurrency}</option>
                  )}
                </select>
              </div>
              <div className="col-md-3">
                <label className="form-label fw-semibold">Account Number</label>
                <input
                  type="text"
                  name="accountNumber"
                  value={newEmployee.accountNumber}
                  onChange={handleInputChange}
                  className="form-control"
                />
              </div>
              <div className="col-12 text-end">
                <button type="submit" className="btn btn-primary">
                  Add Employee
                </button>
              </div>
            </form>
          </div>

          <div className="mt-4">
            <div className="table-responsive rounded-3 overflow-hidden shadow-sm">
              <table className="table table-bordered table-hover align-middle">
                <thead className="table-light">
                  <tr>
                    <th>Employee ID</th>
                    <th>Employee Name</th>
                    <th>Salary Amount</th>
                    <th>Currency</th>
                    <th>Account Number</th>
                    <th className="text-center">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {employees.length > 0 ? (
                    employees.map((e, idx) => (
                      <tr key={idx}>
                        <td>{e.id}</td>
                        <td>{e.name}</td>
                        <td>{parseFloat(e.salary || 0).toFixed(2)}</td>
                        <td>{e.currency}</td>
                        <td>{e.accountNumber}</td>
                        <td className="text-center">
                          <button
                            className="btn btn-danger btn-sm"
                            onClick={() => handleRemoveEmployee(idx)}
                          >
                            Delete
                          </button>
                        </td>
                      </tr>
                    ))
                  ) : (
                    <tr>
                      <td colSpan="6" className="text-center text-muted py-4">
                        No employee data. Please add employees.
                      </td>
                    </tr>
                  )}
                </tbody>
              </table>
            </div>
            <div className="d-flex justify-content-end gap-4 fw-bold mt-3 p-3 bg-light rounded-3">
              <span>Total Employees: {employees.length}</span>
              <span>
                Total Debit Amount: {currencySymbol}
                {Number(totalAmount).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
              </span>
              <span
                className={`badge bg-${approverCount === 1 ? "primary" : approverCount === 2 ? "warning" : "danger"}`}
              >
                Requires {approverCount} Approver{approverCount > 1 ? "s" : ""}
              </span>
            </div>
          </div>

          <div className="mt-4 d-flex flex-wrap justify-content-center gap-3 border-top pt-4">
            <button
              className="btn btn-success"
              onClick={handleSubmitForApproval}
              disabled={employees.length === 0 || submitting}
            >
              {submitting ? "Submitting..." : "Submit for Approval"}
            </button>
          </div>
        </div>
      </div>
    </>
  );
}

export default PayrollManual;
import React, { useState, useEffect } from "react";
import { Link } from "react-router-dom";
import PayrollFilters from "./PayrollFilters";
import PayrollTable from "./PayrollTable";
import UploadFile from "./UploadFile";
import NavBar from "./Navbar";
import BatchAccountInfo from "./BatchAccountInfo";

const CURRENCY_SYMBOLS = { INR: "₹", USD: "$", EUR: "€" };
const INITIAL_BALANCE = { INR: 26500000, USD: 1050000, EUR: 8200 };

const PayrollPayments = () => {
  const [filters, setFilters] = useState({
    debitAccount: "",
    date: "",
    payrollType: "Domestic",
    paymentCurrency: "",
  });
  const [employees, setEmployees] = useState([]);
  const [error, setError] = useState("");
  const [submitting, setSubmitting] = useState(false);
  const [batchGrid, setBatchGrid] = useState([]);

  useEffect(() => {
    fetchBatchGrid();
  }, []);

  const fetchBatchGrid = () => {
    fetch("http://localhost:8080/api/batch/grid")
      .then((res) => res.json())
      .then((data) => setBatchGrid(data));
  };

  const areFiltersValid = Object.values(filters).every(Boolean);

  const handleFiltersChange = (updated) => {
    setFilters({ ...filters, ...updated });
    setEmployees([]);
    setError("");
  };

  const handleFileData = (rows) => {
    if (!rows.length || !rows[0].id) {
      setError("Invalid file format.");
      return;
    }

    let invalidRows = [];
    if (filters.payrollType === "Domestic") {
      invalidRows = rows.filter(
        (row) =>
          row.payrollType.trim().toLowerCase() !== "domestic" ||
          row.currency.trim().toUpperCase() !== "INR"
      );
    } else if (filters.payrollType === "Foreign") {
      // Accept only USD or only EUR, matching paymentCurrency
      const expectedCurrency = filters.paymentCurrency.toUpperCase();
      invalidRows = rows.filter(
        (row) =>
          row.payrollType.trim().toLowerCase() !== "foreign" ||
          row.currency.trim().toUpperCase() !== expectedCurrency
      );
    }

    if (invalidRows.length > 0) {
      if (filters.payrollType === "Domestic") {
        setError("Rows must match Payroll Type (Domestic) and Currency (INR).");
      } else if (filters.payrollType === "Foreign") {
        setError(
          `Rows must match Payroll Type (Foreign) and Currency (${filters.paymentCurrency}).`
        );
      } else {
        setError("Rows do not match the selected Payroll Type or Currency.");
      }
      setEmployees([]);
      return;
    }

    setEmployees(rows);
    setError("");
  };

  const totalAmount = employees.reduce(
    (acc, emp) => acc + Number(emp.salary || 0),
    0
  );
  let approverCount = 1;
  if (totalAmount > 1000000 && totalAmount <= 5000000) approverCount = 2;
  else if (totalAmount > 5000000) approverCount = 3;

  const selectedCurrency = filters.paymentCurrency || "INR";
  const currencySymbol = CURRENCY_SYMBOLS[selectedCurrency];
  const initialBalance = INITIAL_BALANCE[selectedCurrency];
  const filteredBatches = batchGrid
    .filter((b) => b.currency === selectedCurrency)
    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
  const totalDebited = filteredBatches.reduce(
    (acc, b) => acc + (b.totalDebitAmount || 0),
    0
  );
  const availableBalance = (initialBalance - totalDebited).toLocaleString(
    "en-IN",
    { minimumFractionDigits: 2, maximumFractionDigits: 2 }
  );
  const recentBatches = filteredBatches.slice(0, 3);

  const handleSubmitForApproval = () => {
    setSubmitting(true);
    const batchData = {
      batchReference: "BATCH" + Date.now(),
      createdBy: "admin",
      createdAt: new Date().toISOString(),
      debitAccount: filters.debitAccount,
      maxDebitAmount: 100000,
      totalDebitAmount: totalAmount,
      status: "PENDING",
      payments: employees.map((emp) => ({
        employeeId: emp.id,
        employeeName: emp.name,
        salaryAmount: Number(emp.salary),
        currency: emp.currency,
        employeeAccountNo: emp.accountNumber,
        status: "PENDING",
      })),
      currency: selectedCurrency,
    };

    fetch("http://localhost:8080/api/batch", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(batchData),
    })
      .then((res) => {
        if (!res.ok) throw new Error("Failed to save batch!");
        return res.json();
      })
      .then(() => {
        alert("Batch submitted and saved to backend!");
        setEmployees([]);
        fetchBatchGrid();
      })
      .catch(() => {
        alert("Error saving batch to backend. Please try again.");
      })
      .finally(() => setSubmitting(false));
  };

  return (
    <>
      <NavBar />
      <div className="container my-4 bg-white shadow-sm p-4 rounded-3">
        <header className="pb-3 mb-4 border-bottom">
          <h2 className="text-primary fw-bold">Payroll Initiation</h2>
          <p className="text-muted">
            Create payment batches by uploading employee details excel file.
          </p>
        </header>

        {/* Dashboard Top Row */}
        <div className="row mb-3" style={{ minHeight: 285 }}>
          <div
            className="col-md-5 col-lg-4 d-flex align-items-stretch mt-4"
            style={{ paddingLeft: 0 }}
          >
            <BatchAccountInfo paymentCurrency={filters.paymentCurrency} />
          </div>
          <div className="col-md-7 col-lg-8 d-flex flex-column gap-3">
            <div className="w-100 ms-md-3">
              <div
                className="card bg-light mb-3 border border-primary shadow-sm"
                style={{ borderRadius: "18px" }}
              >
                <div className="card-body py-3">
                  <div className="fw-bold text-secondary mb-1">
                    Available Balance
                  </div>
                  <div className="fs-4 text-success">
                    {currencySymbol}
                    {availableBalance}
                  </div>
                  <div className="text-muted">
                    {recentBatches.length
                      ? new Date(recentBatches[0].createdAt).toLocaleString()
                      : "N/A"}
                  </div>
                </div>
              </div>
              <div
                className="card bg-white border border-primary shadow-sm"
                style={{ borderRadius: "18px" }}
              >
                <div className="card-body py-3">
                  <div className="fw-bold text-secondary mb-2">
                    Recent Batches
                  </div>
                  <ul className="list-unstyled mb-0">
                    {recentBatches.length === 0 ? (
                      <li>No history.</li>
                    ) : (
                      recentBatches.map((item, idx) => (
                        <li key={idx}>
                          <span className="fw-semibold">
                            {new Date(item.createdAt).toLocaleDateString()}:
                          </span>{" "}
                          {currencySymbol}
                          {Number(item.totalDebitAmount).toLocaleString()} debited ({item.numberOfPayments} payments)
                        </li>
                      ))
                    )}
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div className="mb-3 text-end">
          <Link className="btn btn-outline-primary btn-sm" to="/manual">
            Switch to Manual Entry
          </Link>
        </div>

        <PayrollFilters filters={filters} onChange={handleFiltersChange} />

        {!areFiltersValid && (
          <div className="alert alert-warning mb-3">
            Please fill all filter fields before uploading Excel file.
          </div>
        )}

        {areFiltersValid && <UploadFile onData={handleFileData} />}
        {error && <div className="alert alert-danger">{error}</div>}
        <PayrollTable employees={employees} setEmployees={setEmployees} />
        {employees.length > 0 && (
          <div className="d-flex justify-content-end gap-4 fw-bold mt-3 p-3 bg-light rounded-3">
            <span>
              Total Debit Amount: {currencySymbol}
              {Number(totalAmount).toLocaleString(undefined, {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2,
              })}
            </span>
            <span
              className={`badge bg-${
                approverCount === 1
                  ? "primary"
                  : approverCount === 2
                  ? "warning"
                  : "danger"
              }`}
            >
              Requires {approverCount} Approver
              {approverCount > 1 ? "s" : ""}
            </span>
          </div>
        )}

        <div className="mt-4 d-flex flex-wrap justify-content-center gap-3 border-top pt-3">
          <button
            className="btn btn-success"
            disabled={!areFiltersValid || employees.length === 0 || submitting}
            onClick={handleSubmitForApproval}
          >
            {submitting ? "Submitting..." : "Submit for Approval"}
          </button>
        </div>
      </div>
    </>
  );
};

export default PayrollPayments;
const PayrollTable = ({ employees, setEmployees }) => {
  const handleRemove = (idx) => {
    setEmployees(employees.filter((_, i) => i !== idx));
  };

  return (
    <div className="table-responsive">
      <table className="table table-bordered table-hover align-middle rounded-3 overflow-hidden">
        <thead className="table-light">
          <tr>
            <th>Employee ID</th>
            <th>Name</th>
            <th>Salary Amount</th>
            <th>Currency</th>
            <th>Account Number</th>
            <th className="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          {employees.length
            ? employees.map((e, idx) => (
                <tr key={idx}>
                  <td>{e.id}</td>
                  <td>{e.name}</td>
                  <td>{parseFloat(e.salary || 0).toFixed(2)}</td>
                  <td>{e.currency}</td>
                  <td>{e.accountNumber}</td>
                  <td className="text-center">
                    <button
                      className="btn btn-danger btn-sm"
                      onClick={() => handleRemove(idx)}
                    >
                      Delete
                    </button>
                  </td>
                </tr>
              ))
            : (
              <tr>
                <td colSpan="6" className="text-center text-muted py-4">
                  No data
                </td>
              </tr>
            )}
        </tbody>
      </table>
      <div className="fw-bold mt-3 p-3 bg-light rounded-3 d-flex justify-content-end gap-4">
        <span>Total Employees: {employees.length}</span>
        <span>Total Debit Amount: {employees.reduce((a, e) => a + Number(e.salary || 0), 0).toFixed(2)}</span>
      </div>
    </div>
  );
};

export default PayrollTable;
import React from "react";
import * as XLSX from "xlsx";

const UploadFile = ({ onData }) => {
  const handleFile = (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (evt) => {
      const data = new Uint8Array(evt.target.result);
      const workbook = XLSX.read(data, { type: "array" });
      const sheet = workbook.Sheets[workbook.SheetNames[0]];
      const rows = XLSX.utils.sheet_to_json(sheet);

      onData(rows);
    };
    reader.readAsArrayBuffer(file);
  };

  return (
    <div className="mb-3">
      <input type="file" accept=".xlsx,.xls" className="form-control" onChange={handleFile} />
    </div>
  );
};

export default UploadFile;
import React from "react";
import { BrowserRouter, Routes, Route } from "react-router-dom";
import PayrollPayments from "./components/PayrollPayments";
import PayrollManual from "./components/PayrollManual";
import BatchGrid from "./components/BatchGrid";

import 'bootstrap/dist/css/bootstrap.min.css';

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<PayrollPayments />} />
        <Route path="/manual" element={<PayrollManual />} />
        <Route path="/batch-grid" element={<BatchGrid />} />
      </Routes>
    </BrowserRouter>
  );
}

export default App;



package com.payrollbackend.controller;

import com.payrollbackend.dto.PayrollBatchGridDTO;
import com.payrollbackend.model.PayrollBatch;
import com.payrollbackend.model.PayrollBatchPayment;
import com.payrollbackend.service.PayrollBatchService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;

@CrossOrigin(origins = "http://localhost:3000")
@RestController
@RequestMapping("/api/batch")
public class PayrollBatchController {

    private final PayrollBatchService batchService;

    @Autowired
    public PayrollBatchController(PayrollBatchService batchService) {
        this.batchService = batchService;
    }

    // CREATE a batch (with all payments)
    @PostMapping
    public PayrollBatch createBatch(@RequestBody PayrollBatch batch) {
        return batchService.saveBatch(batch);
    }

    // GET all batches
    @GetMapping
    public List<PayrollBatch> getAllBatches() {
        return batchService.getAllBatches();
    }

    // GET batch by batch reference (ID in table)
    @GetMapping("/{reference}")
    public PayrollBatch getBatchByReference(@PathVariable String reference) {
        Optional<PayrollBatch> batchOpt = batchService.getBatchByReference(reference);
        return batchOpt.orElse(null);
    }

    // GET all payments for batch
    @GetMapping("/{reference}/payments")
    public List<PayrollBatchPayment> getPaymentsByBatch(@PathVariable String reference) {
        Optional<PayrollBatch> batchOpt = batchService.getBatchByReference(reference);
        if (batchOpt.isPresent()) {
            return batchOpt.get().getPayments();
        }
        return null;
    }

    @GetMapping("/grid")
    public List<PayrollBatchGridDTO> gridEndpoint() {
        return batchService.getBatchGridList();
    }
}

package com.payrollbackend.dto;

import java.time.LocalDateTime;

public class PayrollBatchGridDTO {
    private String batchReference;
    private String createdBy;
    private LocalDateTime createdAt;
    private int numberOfPayments;
    private Double maxDebitAmount;
    private Double totalDebitAmount;
    private String status;
    private String currency;

    public PayrollBatchGridDTO() {}

    public PayrollBatchGridDTO(String batchReference, String createdBy, LocalDateTime createdAt, int numberOfPayments, Double maxDebitAmount, Double totalDebitAmount, String status, String currency) {
        this.batchReference = batchReference;
        this.createdBy = createdBy;
        this.createdAt = createdAt;
        this.numberOfPayments = numberOfPayments;
        this.maxDebitAmount = maxDebitAmount;
        this.totalDebitAmount = totalDebitAmount;
        this.status = status;
        this.currency = currency;
    }

    public String getBatchReference() {
        return batchReference;
    }

    public void setBatchReference(String batchReference) {
        this.batchReference = batchReference;
    }

    public String getCreatedBy() {
        return createdBy;
    }

    public void setCreatedBy(String createdBy) {
        this.createdBy = createdBy;
    }

    public LocalDateTime getCreatedAt() {
        return createdAt;
    }

    public void setCreatedAt(LocalDateTime createdAt) {
        this.createdAt = createdAt;
    }


    public Double getMaxDebitAmount() {
        return maxDebitAmount;
    }

    public void setMaxDebitAmount(Double maxDebitAmount) {
        this.maxDebitAmount = maxDebitAmount;
    }

    public Double getTotalDebitAmount() {
        return totalDebitAmount;
    }

    public void setTotalDebitAmount(Double totalDebitAmount) {
        this.totalDebitAmount = totalDebitAmount;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }
    public int getNumberOfPayments() { return numberOfPayments; }
    public void setNumberOfPayments(int numberOfPayments) { this.numberOfPayments = numberOfPayments; }

    public String getCurrency() { return currency; }
    public void setCurrency(String currency) { this.currency = currency; }

// Getters and setters for all fields here
}

package com.payrollbackend.model;

import com.fasterxml.jackson.annotation.JsonManagedReference;
import jakarta.persistence.*;
import java.time.LocalDateTime;
import java.util.List;

@Entity
@Table(name = "payroll_batch")
public class PayrollBatch {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "batch_reference", unique = true, nullable = false)
    private String batchReference;

    @Column(name = "created_by", nullable = false)
    private String createdBy;

    @Column(name = "created_at", nullable = false)
    private LocalDateTime createdAt;

    @Column(name = "debit_account", nullable = false)
    private String debitAccount;

    @Column(name = "max_debit_amount", nullable = false)
    private Double maxDebitAmount;

    @Column(name = "total_debit_amount", nullable = false)
    private Double totalDebitAmount;

    @Column(name = "status", nullable = false)
    private String status;

    @Column(name = "currency", nullable = false)
    private String currency;

    @OneToMany(mappedBy = "batch", cascade = CascadeType.ALL, orphanRemoval = true)
    @JsonManagedReference
    private List<PayrollBatchPayment> payments;

    public PayrollBatch() {}

    // Getters and setters as before

    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public String getBatchReference() { return batchReference; }
    public void setBatchReference(String batchReference) { this.batchReference = batchReference; }

    public String getCreatedBy() { return createdBy; }
    public void setCreatedBy(String createdBy) { this.createdBy = createdBy; }

    public LocalDateTime getCreatedAt() { return createdAt; }
    public void setCreatedAt(LocalDateTime createdAt) { this.createdAt = createdAt; }

    public String getDebitAccount() { return debitAccount; }
    public void setDebitAccount(String debitAccount) { this.debitAccount = debitAccount; }

    public Double getMaxDebitAmount() { return maxDebitAmount; }
    public void setMaxDebitAmount(Double maxDebitAmount) { this.maxDebitAmount = maxDebitAmount; }

    public Double getTotalDebitAmount() { return totalDebitAmount; }
    public void setTotalDebitAmount(Double totalDebitAmount) { this.totalDebitAmount = totalDebitAmount; }

    public String getStatus() { return status; }
    public void setStatus(String status) { this.status = status; }

    public List<PayrollBatchPayment> getPayments() { return payments; }
    public void setPayments(List<PayrollBatchPayment> payments) { this.payments = payments; }

    public String getCurrency() { return currency; }
    public void setCurrency(String currency) { this.currency = currency; }
}

package com.payrollbackend.model;

import com.fasterxml.jackson.annotation.JsonBackReference;
import jakarta.persistence.*;

@Entity
@Table(name = "payroll_batch_payment")
public class PayrollBatchPayment {
    @Id

    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "batch_id", nullable = false)
    @JsonBackReference
    private PayrollBatch batch;

    @Column(name = "employee_id", nullable = false)
    private String employeeId;

    @Column(name = "employee_name", nullable = false)
    private String employeeName;

    @Column(name = "salary_amount", nullable = false)
    private Double salaryAmount;

    @Column(name = "currency", nullable = false)
    private String currency;

    @Column(name = "employee_account_no", nullable = false)
    private String employeeAccountNo;

    @Column(name = "status", nullable = false)
    private String status;

    public PayrollBatchPayment() {}

    // Getters and setters

    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }

    public PayrollBatch getBatch() { return batch; }
    public void setBatch(PayrollBatch batch) { this.batch = batch; }

    public String getEmployeeId() { return employeeId; }
    public void setEmployeeId(String employeeId) { this.employeeId = employeeId; }

    public String getEmployeeName() { return employeeName; }
    public void setEmployeeName(String employeeName) { this.employeeName = employeeName; }

    public Double getSalaryAmount() { return salaryAmount; }
    public void setSalaryAmount(Double salaryAmount) { this.salaryAmount = salaryAmount; }

    public String getCurrency() { return currency; }
    public void setCurrency(String currency) { this.currency = currency; }

    public String getEmployeeAccountNo() { return employeeAccountNo; }
    public void setEmployeeAccountNo(String employeeAccountNo) { this.employeeAccountNo = employeeAccountNo; }

    public String getStatus() { return status; }
    public void setStatus(String status) { this.status = status; }
}

package com.payrollbackend.repository;

import com.payrollbackend.model.PayrollBatchPayment;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.List;

public interface PayrollBatchPaymentRepository extends JpaRepository<PayrollBatchPayment, Long> {
    List<PayrollBatchPayment> findByBatch_BatchReference(String batchReference);

}

package com.payrollbackend.repository;

import com.payrollbackend.model.PayrollBatch;
import org.springframework.data.jpa.repository.JpaRepository;

public interface PayrollBatchRepository extends JpaRepository<PayrollBatch, Long> {
    PayrollBatch findByBatchReference(String batchReference);
}

package com.payrollbackend.service;

import com.payrollbackend.model.PayrollBatch;
import com.payrollbackend.model.PayrollBatchPayment;
import com.payrollbackend.repository.PayrollBatchRepository;
import com.payrollbackend.repository.PayrollBatchPaymentRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import com.payrollbackend.dto.PayrollBatchGridDTO;

import java.time.LocalDateTime;
import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;

@Service
public class PayrollBatchService {

    private final PayrollBatchRepository batchRepo;
    private final PayrollBatchPaymentRepository paymentRepo;

    @Autowired
    public PayrollBatchService(PayrollBatchRepository batchRepo, PayrollBatchPaymentRepository paymentRepo) {
        this.batchRepo = batchRepo;
        this.paymentRepo = paymentRepo;
    }

    // Save a batch (with payments)
    public PayrollBatch saveBatch(PayrollBatch batch) {
        batch.setCreatedAt(LocalDateTime.now());
        // Make sure all payments reference this batch
        if (batch.getPayments() != null) {
            for (PayrollBatchPayment payment : batch.getPayments()) {
                payment.setBatch(batch);
            }
        }
        return batchRepo.save(batch);
    }

    // Get all batches
    public List<PayrollBatch> getAllBatches() {
        return batchRepo.findAll();
    }

    // Find by batch reference (unique)
    public Optional<PayrollBatch> getBatchByReference(String reference) {
        return batchRepo.findAll().stream()
                .filter(batch -> batch.getBatchReference().equals(reference))
                .findFirst();
    }

    // Get all payments by batch reference
    public List<PayrollBatchPayment> getPaymentsByBatch(PayrollBatch batch) {
        return batch.getPayments();
    }
    public List<PayrollBatchGridDTO> getBatchGridList() {
        return batchRepo.findAll().stream()
                .map(batch -> new PayrollBatchGridDTO(
                        batch.getBatchReference(),
                        batch.getCreatedBy(),
                        batch.getCreatedAt(),
                        batch.getPayments() != null ? batch.getPayments().size() : 0,
                        batch.getMaxDebitAmount(),
                        batch.getTotalDebitAmount(),
                        batch.getStatus(),
                        batch.getCurrency())
                )
                .collect(Collectors.toList());
    }

}

<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.1.4</version> <!-- use your Spring Boot version -->
        <relativePath/>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>payroll-backend</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>payroll-backend</name>
    <description>Payroll Backend</description>

    <properties>
        <java.version>17</java.version>
    </properties>

    <dependencies>
        <!-- SPRING WEB -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <!-- SPRING JPA -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
        <!-- POSTGRESQL DRIVER -->
        <dependency>
            <groupId>org.postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <scope>runtime</scope>
        </dependency>

        <!-- OPTIONAL: JWT SUPPORT FOR SPRING SECURITY (add if you plan to use JWT) -->
        <!--
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-api</artifactId>
            <version>0.11.5</version>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-impl</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-jackson</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        -->
        <!-- OPTIONAL: LOMBOK (for @Getter, @Setter, etc. in models) -->
        <!--
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>
        -->
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project>

spring.datasource.url=jdbc:postgresql://localhost:5432/postgres
spring.datasource.username=postgres
spring.datasource.password=Venkat@2003
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.datasource.url=jdbc:postgresql://localhost:5432/postgres
spring.datasource.username=postgres
spring.datasource.password=Venkat@2003
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect





